<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags -->
    <title>The Islamic Calendar - Interactive Educational Visualization</title>
    <meta name="title" content="The Islamic Calendar - Interactive Educational Visualization">
    <meta name="description" content="Learn about the Islamic (Hijri) calendar system, lunar months, seasonal drift, and the 30-year leap cycle through interactive animations.">
    <meta name="keywords" content="islamic calendar, hijri calendar, lunar calendar, ramadan, islamic months, seasonal drift, leap year cycle, interactive visualization">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://kesava.github.io/calendars/islamic-calendar.html">
    <meta property="og:title" content="The Islamic Calendar">
    <meta property="og:description" content="Interactive visualization of the Islamic calendar system and seasonal drift">

    <!-- Theme Color -->
    <meta name="theme-color" content="#1F2937">

    <!-- Preload Critical Resources -->
    <link rel="preload" href="shared-styles.css" as="style">
    <link rel="preload" href="shared-utils.js" as="script">

    <!-- Styles -->
    <link rel="stylesheet" href="shared-styles.css">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
    <style>
        body {
            overflow-x: hidden;
        }
    </style>
</head>
<body>
    <!-- Skip Link -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Top Navigation Row -->
    <div class="fixed top-4 left-0 right-0 z-50 flex justify-between px-4 no-print">
        <!-- Home Button -->
        <a
            href="index.html"
            class="settings-toggle"
            aria-label="Go to home"
        >
            üè†
        </a>

        <!-- Settings Toggle Button -->
        <button
            id="settings-toggle"
            class="settings-toggle"
            aria-label="Open settings"
        >
            ‚öôÔ∏è
        </button>
    </div>

    <!-- Breadcrumb Navigation (hidden on mobile) -->
    <nav aria-label="Breadcrumb" class="fixed top-20 left-4 z-40 no-print hidden md:block">
        <ol class="flex items-center gap-2 bg-white dark:bg-gray-800 rounded-full px-4 py-2 shadow-lg text-sm">
            <li><a href="index.html" class="text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors">üè† Home</a></li>
            <li class="text-gray-400" aria-hidden="true">/</li>
            <li aria-current="page" class="text-gray-900 dark:text-white font-semibold">Islamic Calendar</li>
        </ol>
    </nav>

    <!-- Settings Overlay -->
    <div id="settings-overlay" class="settings-overlay no-print"></div>

    <!-- Settings Panel -->
    <div id="settings-panel" class="settings-panel no-print">
        <h2 class="settings-header">‚öôÔ∏è Settings</h2>

        <!-- Theme Section -->
        <div class="settings-section">
            <label class="settings-label">Theme</label>
            <div class="settings-control">
                <button id="theme-light" class="settings-button">‚òÄÔ∏è Light</button>
                <button id="theme-dark" class="settings-button">üåô Dark</button>
            </div>
        </div>

        <!-- Font Size Section -->
        <div class="settings-section">
            <label class="settings-label">Font Size</label>
            <div class="settings-control">
                <button id="font-decrease-btn" class="settings-button">A-</button>
                <span id="font-size-display-panel" style="font-weight: 600; color: #8B5CF6;">100%</span>
                <button id="font-increase-btn" class="settings-button">A+</button>
            </div>
            <div class="settings-info">Adjust text size (80% - 150%)</div>
        </div>

        <!-- Animations Section -->
        <div class="settings-section">
            <label class="settings-label">Animations</label>
            <div class="settings-control">
                <button id="animations-on" class="settings-button">‚ñ∂Ô∏è On</button>
                <button id="animations-off" class="settings-button">‚è∏Ô∏è Off</button>
            </div>
        </div>

        <!-- Share Section -->
        <div class="settings-section">
            <label class="settings-label">Share</label>
            <button id="share-button-panel" class="settings-button" style="width: 100%;">üì§ Share This Page</button>
        </div>
    </div>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Seasonal Drift Animation
        function SeasonalDriftAnimation() {
            const [years, setYears] = useState(1);
            const [isPlaying, setIsPlaying] = useState(true);

            useEffect(() => {
                if (!isPlaying || years >= 33) return;
                const timer = setInterval(() => {
                    setYears((y) => Math.min(y + 1, 33));
                }, 1000);
                return () => clearInterval(timer);
            }, [isPlaying, years]);

            // Islamic year = ~354 days, Solar year = ~365 days
            // Difference = ~11 days per year
            const driftDays = years * 11;
            const driftMonths = Math.floor(driftDays / 30);
            const remainingDays = driftDays % 30;

            // Ramadan starts in different seasons
            const seasons = ['Winter', 'Fall', 'Summer', 'Spring'];
            const seasonIndex = Math.floor((years * 11) / 91) % 4;
            const currentSeason = seasons[seasonIndex];

            const seasonEmojis = {
                'Winter': '‚ùÑÔ∏è',
                'Spring': 'üå∏',
                'Summer': '‚òÄÔ∏è',
                'Fall': 'üçÇ'
            };

            return (
                <div className="text-center">
                    <div className="relative w-full max-w-md mx-auto mb-6">
                        {/* Year counter */}
                        <div className="bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 rounded-2xl p-6 mb-4">
                            <div className="text-5xl font-semibold mb-2">{years}</div>
                            <div className="text-base">year{years !== 1 ? 's' : ''} passed</div>
                        </div>

                        {/* Season indicator */}
                        <div className="bg-gray-50 dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 mb-4">
                            <div className="text-6xl mb-3">{seasonEmojis[currentSeason]}</div>
                            <div className="text-lg font-semibold text-gray-900 dark:text-white">
                                Ramadan is now in {currentSeason}
                            </div>
                            <div className="text-sm text-gray-600 dark:text-gray-400 mt-2">
                                Started in {seasonEmojis[seasons[0]]} Winter
                            </div>
                        </div>

                        {/* Drift display */}
                        <div className="bg-white dark:bg-gray-700 rounded-xl p-4 border border-gray-200 dark:border-gray-600">
                            <div className="text-sm text-gray-600 dark:text-gray-400 mb-2">Calendar has drifted:</div>
                            <div className="text-3xl font-semibold text-gray-900 dark:text-white">
                                {driftMonths} months, {remainingDays} days
                            </div>
                            <div className="text-xs text-gray-500 dark:text-gray-400 mt-2">
                                ({driftDays} total days backward through the year)
                            </div>
                        </div>
                    </div>

                    {/* Controls */}
                    <div className="flex items-center gap-2 mb-4 justify-center">
                        <button
                            onClick={() => setYears(Math.max(1, years - 1))}
                            className="px-4 py-2 bg-gray-700 dark:bg-gray-600 text-white rounded-full font-semibold hover:bg-gray-600 dark:hover:bg-gray-500"
                        >
                            ‚àí1
                        </button>
                        <input
                            type="range"
                            min="1"
                            max="33"
                            value={years}
                            onChange={(e) => { setYears(Number(e.target.value)); setIsPlaying(false); }}
                            className="w-48"
                        />
                        <button
                            onClick={() => setYears(Math.min(33, years + 1))}
                            className="px-4 py-2 bg-gray-700 dark:bg-gray-600 text-white rounded-full font-semibold hover:bg-gray-600 dark:hover:bg-gray-500"
                        >
                            +1
                        </button>
                    </div>

                    <button
                        onClick={() => { setIsPlaying(!isPlaying); if (years >= 33) setYears(1); }}
                        className="px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-full text-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"
                    >
                        {isPlaying ? '‚è∏ Pause' : '‚ñ∂ Play'}
                    </button>

                    {years >= 33 && (
                        <div className="mt-4 bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 rounded-xl p-4">
                            <div className="text-lg font-semibold mb-2">üîÑ Full Cycle Complete!</div>
                            <div className="text-sm opacity-90">
                                After ~33 solar years, Ramadan returns to the same season
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // 30-Year Leap Cycle
        function LeapDayCycleAnimation() {
            const [currentYear, setCurrentYear] = useState(0);
            const [isPlaying, setIsPlaying] = useState(true);

            // In a 30-year cycle, 11 years have 355 days (leap years) and 19 years have 354 days
            // Leap years: 2, 5, 7, 10, 13, 16, 18, 21, 24, 26, 29 (counting from 1)
            // In the array below, these are represented as 0-indexed: [1, 4, 6, 9, 12, 15, 17, 20, 23, 25, 28]
            const leapYears = [1, 4, 6, 9, 12, 15, 17, 20, 23, 25, 28]; // 0-indexed (year 1 in cycle = index 0)

            useEffect(() => {
                if (!isPlaying) return;
                const timer = setInterval(() => {
                    setCurrentYear((prev) => (prev + 1) % 30);
                }, 800);
                return () => clearInterval(timer);
            }, [isPlaying]);

            const isLeapYear = leapYears.includes(currentYear);

            return (
                <div className="text-center">
                    <div className="relative w-full max-w-2xl mx-auto mb-6">
                        {/* Year grid */}
                        <div className="grid gap-1 mb-4" style={{ gridTemplateColumns: 'repeat(10, minmax(0, 1fr))' }}>
                            {Array.from({ length: 30 }).map((_, idx) => {
                                const isLeap = leapYears.includes(idx);
                                const isCurrent = idx === currentYear;

                                return (
                                    <div
                                        key={idx}
                                        className={`aspect-square rounded-lg transition-all duration-300 flex items-center justify-center text-xs font-semibold ${
                                            isCurrent
                                                ? isLeap
                                                    ? 'bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 scale-110 shadow-lg'
                                                    : 'bg-gray-700 dark:bg-gray-400 text-white dark:text-gray-900 scale-110 shadow-lg'
                                                : isLeap
                                                    ? 'bg-gray-400 dark:bg-gray-500 text-white'
                                                    : 'bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300'
                                        }`}
                                    >
                                        {idx + 1}
                                    </div>
                                );
                            })}
                        </div>

                        {/* Legend */}
                        <div className="flex items-center justify-center gap-4 text-sm mb-4">
                            <div className="flex items-center gap-2">
                                <div className="w-4 h-4 bg-gray-900 dark:bg-gray-200 rounded"></div>
                                <span className="text-gray-600 dark:text-gray-400">355 days (Leap)</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className="w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded"></div>
                                <span className="text-gray-600 dark:text-gray-400">354 days (Regular)</span>
                            </div>
                        </div>
                    </div>

                    <div className="bg-gray-50 dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 mb-3">
                        <div className="text-sm text-gray-600 dark:text-gray-400 mb-2">Year {currentYear + 1} of 30:</div>
                        <div className="text-4xl font-semibold mb-2 text-gray-900 dark:text-white">
                            {isLeapYear ? '355' : '354'} days
                        </div>
                        <div className="text-base text-gray-700 dark:text-gray-300">
                            {isLeapYear ? 'üåô Dhul Hijjah has 30 days' : 'üåô Dhul Hijjah has 29 days'}
                        </div>
                    </div>

                    <div className="bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 p-4 rounded-xl mb-3">
                        <div className="text-sm mb-2">üìä The Pattern:</div>
                        <div className="text-base">11 leap years in every 30-year cycle</div>
                        <div className="text-xs mt-2 opacity-75">Years 2, 5, 7, 10, 13, 16, 18, 21, 24, 26, and 29</div>
                    </div>

                    <button
                        onClick={() => setIsPlaying(!isPlaying)}
                        className="px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-full text-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"
                    >
                        {isPlaying ? '‚è∏ Pause' : '‚ñ∂ Play'}
                    </button>
                </div>
            );
        }

        // Month Display
        function IslamicMonths() {
            const months = [
                { name: 'Muharram', days: '29/30', special: 'Sacred month' },
                { name: 'Safar', days: '29/30', special: '' },
                { name: "Rabi' al-Awwal", days: '29/30', special: "Prophet's birth" },
                { name: "Rabi' al-Thani", days: '29/30', special: '' },
                { name: 'Jumada al-Awwal', days: '29/30', special: '' },
                { name: 'Jumada al-Thani', days: '29/30', special: '' },
                { name: 'Rajab', days: '29/30', special: 'Sacred month' },
                { name: "Sha'ban", days: '29/30', special: '' },
                { name: 'Ramadan', days: '29/30', special: 'Fasting month' },
                { name: 'Shawwal', days: '29/30', special: 'Eid al-Fitr' },
                { name: "Dhu al-Qi'dah", days: '29/30', special: 'Sacred month' },
                { name: 'Dhu al-Hijjah', days: '29/30*', special: 'Hajj & Eid al-Adha' },
            ];

            return (
                <div className="space-y-2">
                    {months.map((month, idx) => (
                        <div
                            key={idx}
                            className="bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700 flex items-center justify-between"
                        >
                            <div className="flex items-center gap-3">
                                <div className="text-xl font-semibold text-gray-900 dark:text-white w-6">{idx + 1}</div>
                                <div>
                                    <div className="font-semibold text-gray-900 dark:text-white">{month.name}</div>
                                    {month.special && (
                                        <div className="text-xs text-gray-500 dark:text-gray-400">{month.special}</div>
                                    )}
                                </div>
                            </div>
                            <div className="text-sm text-gray-600 dark:text-gray-400">{month.days} days</div>
                        </div>
                    ))}
                    <div className="bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 rounded-lg p-3 text-sm">
                        <span className="font-semibold">*</span> In leap years, Dhu al-Hijjah has 30 days instead of 29
                    </div>
                </div>
            );
        }

        function IslamicCalendarApp() {
            const [screen, setScreen] = useState(0);

            const screens = [
                { title: "Welcome", icon: "‚ò™Ô∏è" },
                { title: "The System", icon: "üåô" },
                { title: "Seasonal Drift", icon: "üîÑ" },
                { title: "Comparison", icon: "‚öñÔ∏è" }
            ];

            return (
                <main id="main-content" className="min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-8 pt-20 md:pt-24 overflow-x-hidden transition-colors" role="main">
                    <div className="max-w-4xl mx-auto w-full">
                        {/* Progress Dots */}
                        <div className="flex justify-center gap-3 mb-8" role="navigation" aria-label="Progress through screens">
                            {screens.map((s, idx) => (
                                <button
                                    key={idx}
                                    onClick={() => setScreen(idx)}
                                    aria-label={`${s.title}${idx === screen ? ' (current)' : ''}`}
                                    aria-current={idx === screen ? 'step' : undefined}
                                    className={`transition-all duration-300 ${
                                        idx === screen
                                            ? 'w-12 h-12 rounded-full shadow-lg scale-110'
                                            : 'w-10 h-10 rounded-full shadow opacity-60 hover:opacity-100'
                                    } ${idx === screen ? 'bg-gray-800 dark:bg-gray-200' : 'bg-gray-400 dark:bg-gray-600'} flex items-center justify-center text-2xl`}
                                >
                                    {s.icon}
                                </button>
                            ))}
                        </div>

                        {/* Screen 0: Welcome */}
                        {screen === 0 && (
                            <div className="fade-in">
                                <div className="bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-6 md:p-12 text-center border border-gray-200 dark:border-gray-700 transition-colors">
                                    <div className="text-6xl md:text-8xl mb-6 float">‚ò™Ô∏è</div>
                                    <h1 className="text-3xl md:text-6xl font-semibold text-gray-900 dark:text-white mb-6">
                                        The Islamic Calendar
                                    </h1>
                                    <p className="text-lg text-gray-600 dark:text-gray-300 mb-8">
                                        Also known as the Hijri Calendar
                                    </p>

                                    <div className="space-y-6 mt-8">
                                        <div className="bg-gray-50 dark:bg-gray-900 p-6 md:p-8 rounded-2xl border border-gray-200 dark:border-gray-700">
                                            <p className="text-xl md:text-2xl font-semibold mb-4 text-gray-800 dark:text-gray-200">
                                                A Purely Lunar Calendar
                                            </p>
                                            <div className="bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 max-w-md mx-auto">
                                                <div className="text-4xl mb-2">üåô</div>
                                                <div className="font-semibold text-lg text-gray-800 dark:text-gray-200">Only Follows the Moon</div>
                                                <div className="text-sm text-gray-600 dark:text-gray-400">Does NOT sync with the solar year</div>
                                                <div className="text-2xl font-semibold text-gray-700 dark:text-gray-300 mt-2">~354 days/year</div>
                                            </div>
                                        </div>

                                        <div className="bg-gray-50 dark:bg-gray-900 p-6 md:p-8 rounded-2xl border border-gray-200 dark:border-gray-700">
                                            <div className="text-5xl mb-4 bounce">üîÑ</div>
                                            <p className="text-xl md:text-2xl font-semibold text-gray-800 dark:text-gray-200">
                                                A Different Approach
                                            </p>
                                            <p className="text-base md:text-lg text-gray-700 dark:text-gray-300 mt-3">
                                                Unlike Hindu and Hebrew calendars,<br/>
                                                the Islamic calendar <span className="text-gray-900 dark:text-white font-medium">does NOT add extra months</span>
                                                <br/>
                                                <br/>
                                                Instead, it <span className="text-gray-900 dark:text-white font-medium">drifts through all seasons</span>
                                            </p>
                                        </div>

                                        <button
                                            onClick={() => setScreen(1)}
                                            className="px-8 md:px-12 py-4 md:py-5 rounded-full text-xl md:text-2xl font-semibold bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 shadow-lg hover:bg-gray-800 dark:hover:bg-gray-300 hover:scale-105 transition-all transform"
                                        >
                                            Learn More ‚Üí
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Screen 1: The System */}
                        {screen === 1 && (
                            <div className="fade-in">
                                <div className="bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-4 md:p-8 border border-gray-200 dark:border-gray-700">
                                    <h2 className="text-3xl md:text-4xl font-semibold text-gray-900 dark:text-white mb-6 text-center">
                                        üåô The Islamic Calendar System
                                    </h2>

                                    <div className="bg-gray-50 dark:bg-gray-900 p-4 md:p-8 rounded-2xl mb-6 border border-gray-200 dark:border-gray-700">
                                        <h3 className="text-xl md:text-2xl font-semibold text-gray-900 dark:text-white mb-4 text-center">
                                            12 Lunar Months
                                        </h3>
                                        <IslamicMonths />
                                    </div>

                                    <div className="bg-gray-50 dark:bg-gray-900 p-4 md:p-8 rounded-2xl mb-6 border border-gray-200 dark:border-gray-700">
                                        <h3 className="text-xl md:text-2xl font-semibold text-gray-900 dark:text-white mb-4 text-center">
                                            The 30-Year Leap Day Cycle
                                        </h3>
                                        <LeapDayCycleAnimation />

                                        <div className="mt-6 bg-white dark:bg-gray-800 rounded-xl p-4 md:p-6 border border-gray-200 dark:border-gray-700">
                                            <p className="text-sm md:text-base text-gray-600 dark:text-gray-400 mb-3">
                                                Most years have <span className="text-gray-900 dark:text-white font-medium">354 days</span>,
                                                but 11 years in each 30-year cycle have <span className="text-gray-900 dark:text-white font-medium">355 days</span>
                                                (one extra day added to Dhu al-Hijjah).
                                            </p>
                                            <div className="bg-gray-50 dark:bg-gray-900 p-3 rounded-lg border border-gray-200 dark:border-gray-700 text-sm text-gray-600 dark:text-gray-400">
                                                <p className="font-medium text-gray-800 dark:text-gray-200 mb-1">Important Note:</p>
                                                <p>Unlike Hindu/Hebrew calendars which add entire <span className="font-medium">months</span>,
                                                the Islamic calendar only adds individual <span className="font-medium">days</span> - never a 13th month!</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="flex flex-col sm:flex-row gap-3 md:gap-4">
                                        <button
                                            onClick={() => setScreen(0)}
                                            className="flex-1 px-6 md:px-8 py-3 md:py-4 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-full font-semibold text-lg md:text-xl hover:bg-gray-300 dark:hover:bg-gray-600"
                                        >
                                            ‚Üê Back
                                        </button>
                                        <button
                                            onClick={() => setScreen(2)}
                                            className="flex-1 px-6 md:px-8 py-3 md:py-4 bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 rounded-full font-semibold text-lg md:text-xl shadow-lg hover:bg-gray-800 dark:hover:bg-gray-300 hover:scale-105 transition-all"
                                        >
                                            See Seasonal Drift ‚Üí
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Screen 2: Seasonal Drift */}
                        {screen === 2 && (
                            <div className="fade-in">
                                <div className="bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-4 md:p-8 border border-gray-200 dark:border-gray-700">
                                    <h2 className="text-3xl md:text-4xl font-semibold text-gray-900 dark:text-white mb-6 text-center">
                                        üîÑ Drifting Through the Seasons
                                    </h2>

                                    <div className="bg-gray-50 dark:bg-gray-900 p-4 md:p-8 rounded-2xl mb-6 border border-gray-200 dark:border-gray-700">
                                        <h3 className="text-xl md:text-2xl font-semibold text-gray-900 dark:text-white mb-4 text-center">
                                            Watch Ramadan Move Through the Year
                                        </h3>
                                        <SeasonalDriftAnimation />
                                    </div>

                                    <div className="bg-gray-50 dark:bg-gray-900 p-4 md:p-8 rounded-2xl mb-6 border border-gray-200 dark:border-gray-700">
                                        <h3 className="text-xl md:text-2xl font-semibold text-gray-900 dark:text-white mb-4 text-center">
                                            Why Does This Happen?
                                        </h3>

                                        <div className="space-y-4">
                                            <div className="bg-white dark:bg-gray-800 rounded-xl p-4 md:p-6 border border-gray-200 dark:border-gray-700">
                                                <p className="text-sm md:text-base text-gray-600 dark:text-gray-400 mb-3">
                                                    The Islamic year is <span className="text-gray-900 dark:text-white font-medium">~11 days shorter</span> than the solar year:
                                                </p>
                                                <div className="bg-gray-50 dark:bg-gray-900 p-4 rounded-lg border border-gray-200 dark:border-gray-700 space-y-2 text-sm text-gray-600 dark:text-gray-400">
                                                    <p>‚Ä¢ Islamic year: 354 or 355 days</p>
                                                    <p>‚Ä¢ Solar year: ~365.25 days</p>
                                                    <p>‚Ä¢ <span className="text-gray-900 dark:text-white font-medium">Difference: ~11 days per year</span></p>
                                                </div>
                                            </div>

                                            <div className="bg-white dark:bg-gray-800 rounded-xl p-4 md:p-6 border border-gray-200 dark:border-gray-700">
                                                <p className="font-semibold text-gray-900 dark:text-white mb-3">üîÑ The Complete Cycle:</p>
                                                <div className="space-y-2 text-sm text-gray-600 dark:text-gray-400">
                                                    <p>‚Ä¢ Every year, Islamic months start ~11 days earlier in the solar calendar</p>
                                                    <p>‚Ä¢ After ~33 years, they complete a full cycle through all seasons</p>
                                                    <p>‚Ä¢ This means Ramadan experiences all seasons: summer, fall, winter, spring</p>
                                                </div>
                                            </div>

                                            <div className="bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 rounded-xl p-4 md:p-6">
                                                <p className="text-center font-semibold mb-2">
                                                    üåç A Unique Feature
                                                </p>
                                                <p className="text-sm text-center opacity-90">
                                                    This is the only major calendar that intentionally drifts through the seasons.
                                                    Muslims around the world experience Ramadan in all seasons and day lengths over their lifetime!
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="flex flex-col sm:flex-row gap-3 md:gap-4">
                                        <button
                                            onClick={() => setScreen(1)}
                                            className="flex-1 px-6 md:px-8 py-3 md:py-4 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-full font-semibold text-lg md:text-xl hover:bg-gray-300 dark:hover:bg-gray-600"
                                        >
                                            ‚Üê Back
                                        </button>
                                        <button
                                            onClick={() => setScreen(3)}
                                            className="flex-1 px-6 md:px-8 py-3 md:py-4 bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 rounded-full font-semibold text-lg md:text-xl shadow-lg hover:bg-gray-800 dark:hover:bg-gray-300 hover:scale-105 transition-all"
                                        >
                                            Compare Calendars ‚Üí
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Screen 3: Comparison */}
                        {screen === 3 && (
                            <div className="fade-in">
                                <div className="bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-4 md:p-8 border border-gray-200 dark:border-gray-700">
                                    <h2 className="text-3xl md:text-4xl font-semibold text-gray-900 dark:text-white mb-6 text-center">
                                        ‚öñÔ∏è Three Different Approaches
                                    </h2>

                                    <div className="space-y-6">
                                        <div className="bg-gray-50 dark:bg-gray-900 p-4 md:p-6 rounded-2xl border border-gray-200 dark:border-gray-700">
                                            <h3 className="text-xl md:text-2xl font-semibold text-gray-900 dark:text-white mb-4 text-center">
                                                The Same Problem, Different Solutions
                                            </h3>

                                            <div className="grid grid-cols-1 gap-4">
                                                <div className="bg-white dark:bg-gray-800 rounded-xl p-4 border-l-4 border-gray-600 dark:border-gray-400">
                                                    <div className="text-3xl mb-2">‚ò™Ô∏è</div>
                                                    <p className="font-semibold text-gray-900 dark:text-white mb-2">Islamic Calendar</p>
                                                    <div className="space-y-1 text-sm text-gray-600 dark:text-gray-400">
                                                        <p>‚Ä¢ <span className="font-medium text-gray-800 dark:text-gray-200">Purely Lunar:</span> Only follows the Moon</p>
                                                        <p>‚Ä¢ <span className="font-medium text-gray-800 dark:text-gray-200">No leap months:</span> Only adds leap days</p>
                                                        <p>‚Ä¢ <span className="font-medium text-gray-800 dark:text-gray-200">Drifts:</span> Cycles through all seasons every ~33 years</p>
                                                        <p>‚Ä¢ <span className="font-medium text-gray-800 dark:text-gray-200">30-year cycle:</span> 11 years have 355 days</p>
                                                    </div>
                                                </div>

                                                <div className="bg-white dark:bg-gray-800 rounded-xl p-4 border-l-4 border-gray-500 dark:border-gray-400">
                                                    <div className="text-3xl mb-2">üïé</div>
                                                    <p className="font-semibold text-gray-900 dark:text-white mb-2">Hebrew Calendar</p>
                                                    <div className="space-y-1 text-sm text-gray-600 dark:text-gray-400">
                                                        <p>‚Ä¢ <span className="font-medium text-gray-800 dark:text-gray-200">Lunisolar:</span> Syncs Moon with Sun</p>
                                                        <p>‚Ä¢ <span className="font-medium text-gray-800 dark:text-gray-200">Adds months:</span> 13th month (Adar II) in leap years</p>
                                                        <p>‚Ä¢ <span className="font-medium text-gray-800 dark:text-gray-200">Fixed pattern:</span> Same 19-year cycle repeats</p>
                                                        <p>‚Ä¢ <span className="font-medium text-gray-800 dark:text-gray-200">Pre-calculated:</span> Known centuries ahead</p>
                                                    </div>
                                                </div>

                                                <div className="bg-white dark:bg-gray-800 rounded-xl p-4 border-l-4 border-gray-500 dark:border-gray-400">
                                                    <div className="text-3xl mb-2">üïâÔ∏è</div>
                                                    <p className="font-semibold text-gray-900 dark:text-white mb-2">Hindu Calendar</p>
                                                    <div className="space-y-1 text-sm text-gray-600 dark:text-gray-400">
                                                        <p>‚Ä¢ <span className="font-medium text-gray-800 dark:text-gray-200">Lunisolar:</span> Syncs Moon with Sun</p>
                                                        <p>‚Ä¢ <span className="font-medium text-gray-800 dark:text-gray-200">Adds/skips months:</span> Adhik Maas & Kshaya Masa</p>
                                                        <p>‚Ä¢ <span className="font-medium text-gray-800 dark:text-gray-200">Astronomical:</span> Based on Sankranti (Sun position)</p>
                                                        <p>‚Ä¢ <span className="font-medium text-gray-800 dark:text-gray-200">Variable:</span> Timing depends on observation</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 rounded-xl p-4 md:p-6">
                                            <h3 className="text-xl md:text-2xl font-semibold mb-3 text-center">
                                                üåç Three Philosophies
                                            </h3>
                                            <div className="space-y-3 text-sm opacity-90">
                                                <p>‚Ä¢ <span className="font-medium">Islamic:</span> Pure lunar simplicity - let the calendar drift naturally through seasons</p>
                                                <p>‚Ä¢ <span className="font-medium">Hebrew:</span> Mathematical predictability - fixed pattern for stability</p>
                                                <p>‚Ä¢ <span className="font-medium">Hindu:</span> Astronomical precision - sync with actual celestial positions</p>
                                            </div>
                                        </div>

                                        <div className="bg-gray-50 dark:bg-gray-900 p-4 md:p-6 rounded-2xl border border-gray-200 dark:border-gray-700">
                                            <h3 className="text-xl md:text-2xl font-semibold text-gray-900 dark:text-white mb-4 text-center">
                                                ‚ú® Fun Facts
                                            </h3>
                                            <div className="space-y-3">
                                                <div className="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                                                    <p className="font-medium text-gray-800 dark:text-gray-200">üìú Year 1 Started</p>
                                                    <p className="text-sm text-gray-600 dark:text-gray-400">622 CE - The year of Prophet Muhammad's migration (Hijra) from Mecca to Medina</p>
                                                </div>
                                                <div className="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                                                    <p className="font-medium text-gray-800 dark:text-gray-200">üåô Moon Sighting</p>
                                                    <p className="text-sm text-gray-600 dark:text-gray-400">Many Muslim communities still determine months by actual moon sighting, not just calculation</p>
                                                </div>
                                                <div className="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                                                    <p className="font-medium text-gray-800 dark:text-gray-200">üìÖ Year Numbering</p>
                                                    <p className="text-sm text-gray-600 dark:text-gray-400">Islamic year 1446 = Gregorian 2024/2025. Islamic years are about 3% shorter!</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="flex flex-col sm:flex-row gap-3 md:gap-4">
                                        <button
                                            onClick={() => setScreen(2)}
                                            className="flex-1 px-6 md:px-8 py-3 md:py-4 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-full font-semibold text-lg md:text-xl hover:bg-gray-300 dark:hover:bg-gray-600"
                                        >
                                            ‚Üê Back
                                        </button>
                                        <button
                                            onClick={() => setScreen(0)}
                                            className="flex-1 px-6 md:px-8 py-3 md:py-4 bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 rounded-full font-semibold text-lg md:text-xl shadow-lg hover:bg-gray-800 dark:hover:bg-gray-300 hover:scale-105 transition-all"
                                        >
                                            üîÑ Start Over
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </main>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<IslamicCalendarApp />);
    </script>

    <!-- Shared Utilities -->
    <script src="shared-utils.js"></script>
    <script src="accessibility.js"></script>

    <!-- UI Controls Initialization -->
    <script>
        // Settings Panel Controls
        const settingsToggle = document.getElementById('settings-toggle');
        const settingsPanel = document.getElementById('settings-panel');
        const settingsOverlay = document.getElementById('settings-overlay');

        // Toggle panel
        settingsToggle.addEventListener('click', () => {
            settingsPanel.classList.toggle('open');
            settingsOverlay.classList.toggle('open');
            soundManager.play('click');
        });

        // Close panel when clicking overlay
        settingsOverlay.addEventListener('click', () => {
            settingsPanel.classList.remove('open');
            settingsOverlay.classList.remove('open');
        });

        // Theme controls
        const themeLightBtn = document.getElementById('theme-light');
        const themeDarkBtn = document.getElementById('theme-dark');

        function updateThemeButtons() {
            if (themeManager.isDark) {
                themeLightBtn.classList.remove('active');
                themeDarkBtn.classList.add('active');
            } else {
                themeLightBtn.classList.add('active');
                themeDarkBtn.classList.remove('active');
            }
        }

        updateThemeButtons();

        themeLightBtn.addEventListener('click', () => {
            if (themeManager.isDark) {
                themeManager.toggle();
                updateThemeButtons();
                screenReader.announce('Light mode enabled');
                soundManager.play('click');
            }
        });

        themeDarkBtn.addEventListener('click', () => {
            if (!themeManager.isDark) {
                themeManager.toggle();
                updateThemeButtons();
                screenReader.announce('Dark mode enabled');
                soundManager.play('click');
            }
        });

        // Font size controls
        const fontDecreaseBtn = document.getElementById('font-decrease-btn');
        const fontIncreaseBtn = document.getElementById('font-increase-btn');
        const fontSizeDisplayPanel = document.getElementById('font-size-display-panel');

        function updateFontDisplay() {
            fontSizeDisplayPanel.textContent = `${fontSizeController.size}%`;
        }

        updateFontDisplay();

        fontDecreaseBtn.addEventListener('click', () => {
            fontSizeController.decrease();
            updateFontDisplay();
            screenReader.announce(`Font size decreased to ${fontSizeController.size}%`);
            soundManager.play('click');
        });

        fontIncreaseBtn.addEventListener('click', () => {
            fontSizeController.increase();
            updateFontDisplay();
            screenReader.announce(`Font size increased to ${fontSizeController.size}%`);
            soundManager.play('click');
        });

        // Animation controls
        const animationsOnBtn = document.getElementById('animations-on');
        const animationsOffBtn = document.getElementById('animations-off');

        function updateAnimationButtons() {
            if (animationController.enabled) {
                animationsOnBtn.classList.add('active');
                animationsOffBtn.classList.remove('active');
            } else {
                animationsOnBtn.classList.remove('active');
                animationsOffBtn.classList.add('active');
            }
        }

        updateAnimationButtons();

        animationsOnBtn.addEventListener('click', () => {
            if (!animationController.enabled) {
                animationController.toggle();
                updateAnimationButtons();
                screenReader.announce('Animations enabled');
                soundManager.play('click');
            }
        });

        animationsOffBtn.addEventListener('click', () => {
            if (animationController.enabled) {
                animationController.toggle();
                updateAnimationButtons();
                screenReader.announce('Animations disabled');
                soundManager.play('click');
            }
        });

        // Share button
        document.getElementById('share-button-panel').addEventListener('click', async () => {
            const success = await shareContent(
                'The Islamic Calendar',
                'Check out this interactive Islamic calendar explanation!',
                window.location.href
            );
            if (success) {
                soundManager.play('success');
            }
        });

        // Initialize sound manager
        soundManager.init();
    </script>
</body>
</html>
